<div class="container-fluid">
    <div>
      <!------------DATE-------------->
      <div class="row" style="margin-top: 6px;">
        <div class="col-md-4">
            <mat-form-field class="search">
              <mat-icon matPrefix>search</mat-icon>
              <input #in (input)="allDevicesDataByOutageResp.queryBy({search: in.value})" type="text" matInput placeholder="Search">
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field>
              <mat-label>All Devices</mat-label>
              <mat-select [(ngModel)]="selectedDevice">
                <mat-option [value]="0" (onSelectionChange)="selectDevices(0,'All',$event)">
                    All 
                  </mat-option>
                <mat-option  (onSelectionChange)="selectDevices(devices.device_name,devices.device_id, devices,$event)"  *ngFor="let devices of allDevicesDrpDownResp" [value]="devices">
                  {{devices.device_name}}
                </mat-option>
                <mat-option>

                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="col-md-2">
            <mat-form-field >
              <mat-label>Monthly</mat-label>
              <mat-select (selectionChange)="selectDevices($event)" [disabled]=true>
                <!-- <mat-option *ngFor="let devices of allDevicesDataByOutageResp" [value]="devices.device_name">
                  {{devices.device_name}}
                </mat-option> -->
                <mat-option [value]="'1'">Monthly</mat-option>
                <mat-option [value]="'2'">Weekly</mat-option>
                <mat-option [value]="'3'">Daily</mat-option>
             
              </mat-select>
            </mat-form-field>
          </div>

        <div class="col-md-3" style="margin-top: 10px;">
          <button mat-button class="btn btn-success" style="float: right;padding: 8px;">
            <i class="material-icons" style="font-size: 23px" (click)="prev()">navigate_before</i>
            <input [hidden]="true" matInput [matDatepicker]="picker" (dateInput)="addEvent('input', $event)"
              [min]="minDate" [max]="maxDate" (dateChange)="addEvent('change', $event)" />
            <mat-datepicker touchUi #picker></mat-datepicker>

            <span (click)="picker.open()">
              {{ today | date }}
            </span>

            <i class="material-icons" *ngIf="this.isButtonVisible" (click)="next()"
              style="font-size: 23px">navigate_next</i>
          </button>
        </div>

      </div>
    </div>

    <!----------CARDS-------->
    <div class="row">
      <div class="col-lg-12 ">
        <div class="card">
          <!-- <div class="card-body">  -->
          <div>
            <div class="card-header card-header-danger" style="padding: 10px;">
              <h4 class="card-title">Monthly Overview</h4>
            </div>

            <div class="row" style=" margin: 0px;" >
              <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="card" style="box-shadow: 5px 5px 4px 0 rgb(0 0 0 / 14%);">
                  <div class="card-header card-header-warning card-header-icon" style="text-align: center; margin: 0px">
                    <div class="cardBody">
                      <div class="trequest">
                        <p class="cardColor"> Location</p>

                        <div class="cardData">
                            {{dailySummaryDataById && dailySummaryDataById.locations ? dailySummaryDataById.locations : '00'}}
                             </div>
                      </div>
                      <div class="bottomCard">
                        <!-- (click)="openDialog('requestors',{},null)"  -->
                        <button class="detailsButton">
                          Details
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="card card-stats" style="box-shadow: 5px 5px 4px 0 rgb(0 0 0 / 14%);">
                  <div class="card-header card-header-warning card-header-icon" style="text-align: center; margin: 0px">
                    <div class="cardBody">
                      <div class="trequest">
                        <p class="cardColor">Total No. Of Outages</p>
                        <div class="cardData">
                            {{dailySummaryDataById && dailySummaryDataById.total_outrages ? dailySummaryDataById.total_outrages : '00'}}
                        </div>
                      </div>
                      <div class="bottomCard">
                        <button class="detailsButton">
                          Details
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="card card-stats" style="box-shadow: 5px 5px 4px 0 rgb(0 0 0 / 14%);">
                  <div class="card-header card-header-warning card-header-icon" style="text-align: center; margin: 0px">
                    <div class="cardBody">
                      <div class="trequest">
                        <p class="cardColor">Total Mins Of Outages</p>
                        <div class="cardData">
                            {{dailySummaryDataById && dailySummaryDataById.total_min_outrages ? dailySummaryDataById.total_min_outrages : '00'}}
                        </div>
                      </div>
                      <div class="bottomCard">
                        <button class="detailsButton">
                          Details
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
           
            </div>

            <!-- <div class="row form-group" *ngIf="(dailySummaryDataById == null && dailySummaryDataById == undefined)">
                <div class="col-md-12">
                <p class="noData"> No Data Found  <i class="material-icons">report_off
                </i></p>  </div>
              </div> -->
          </div>
          <!-- </div> -->

        </div>
      </div>
    </div>

    <!---------------------graphs---------->
 <div class="row" style="margin-top: -20px;">
    <div class="col-lg-12 ">
      <div class="card">
        <!-- <div class="card-body">  -->
        <div>
          <div class="card-header card-header-danger" style="padding: 10px;">
            <h4 class="card-title">Monthly Outage Graph : {{today |date : "yyyy-MM-dd"}} </h4>
          </div>

          <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6" style="margin-left: 20px;
            margin-top: 10px;font-size: 14px;font-weight: 400;"  [ngClass]="{ 'selected': isLineChart == true }" >
              <a class="a_mod" (click)="getLineChart()">Total No. Of Outages</a>
            </div>

            <div class="col-lg-3 col-md-6 col-sm-6" [ngClass]="{ 'selected': isBarChart == true }" style="  margin-top: 10px;font-size: 14px;font-weight: 400;"  >
              <a  style="margin-left: 30px;" (click)="clickBarChart()">Total Mins Of Outages</a>
            </div>
          </div>
         
          <div class="row" style=" margin: 0px;">
            <div class="col-md-12"  *ngIf="isBarChart">
                <div style="position: relative">
                    <canvas id="canvas" height="60"
                    width="60">{{ chart }}</canvas>
                  </div>
            </div>
           
            <div class="col-md-12" *ngIf="isLineChart">
                <div class="chart-container" style="position: relative;"  >
                    <canvas id="canvasLine"  height="60"
                    width="60">{{ lineChart }}</canvas>
                </div>
            </div>

            
             
            <!-- <div class="col-md-12">
                <div style="display: block;" *ngIf="isBarChart">
                    <canvas id="canvas "height="100"
                   >{{ chart }}</canvas>
                  </div>
    
                  <div class="chart-container" style="position: relative;display: block; height: 100;"  *ngIf="isLineChart">
                    <canvas id="canvasLine">{{ lineChart }}</canvas>
    
                </div>
            </div> -->
         
          </div>
        </div>
        <!-- </div> -->

      </div>
    </div>
  </div>
  

  <!--------------------------------table---------------------------------->
  <div class="row" style="margin-top: -25px;">
    <div class="col-lg-12 ">
      <div class="card">
        <div class="card-header card-header-danger" style="padding: 10px;">
          <h4 class="card-title">Power Status Summary
          <button mat-button class="btn btn-success" matTooltip="Download Report"
						[matTooltipPosition]="'below'" (click)="results1()" style="float: right;padding: 3px 10px 2px 10px;">
						<i class="material-icons">cloud_download</i>
					</button>
          </h4>
        
        </div>

        <div >
          <!-- <mat-spinner *ngIf="data.loading$ | async" diameter="32"></mat-spinner> -->

          <div class="example-container mat-elevation-z8" style="margin-top: 20px;" *ngIf="devicesByOutageataResp">
            <table mat-table [dataSource]="devicesByOutageataResp" multiTemplateDataRows class="table table-striped">
              <ng-container *ngFor="let column of displayedColumns">
  
                <ng-container *ngIf="column !== 'Status'">
                  <ng-container [matColumnDef]="column" [sticky]="isSticky(column)">
                    <th class="tableHeader" mat-header-cell *matHeaderCellDef style="word-wrap: none !important;">
                      {{column}}</th>
                    <td class="tableBody" mat-cell *matCellDef="let element" >
                     
                      <ng-container *ngIf="element[column] !== undefined">
                        {{element[column]}}
                      </ng-container>
                      <ng-container *ngIf="element[column]== undefined">
                        --
                      </ng-container></td>
                  </ng-container>
                  
                </ng-container>

                <ng-container *ngIf="column == 'Status'">
                  <ng-container [matColumnDef]="column" [sticky]="isSticky(column)">
                    <th class="tableHeader" mat-header-cell *matHeaderCellDef
                      style="word-wrap: none !important;">
                      {{column}}
                    </th>
                    <td class="tableBody" mat-cell *matCellDef="let element">
                      <span *ngIf="element[column] == 0" class="status-ok"></span>
                      <span *ngIf="element[column] == 1" class="status-notok"></span>
                    </td>
                  </ng-container>
                </ng-container>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="this.displayedColumns;"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns">
              </tr>
            </table>
            <mat-paginator *ngIf="devicesByOutageataResp.page$ | async as page" [length]="page.totalElements" [pageSize]="page.size"
              [pageIndex]="page.number" [hidePageSize]="false" (page)="devicesByOutageataResp.fetch($event.pageIndex)"
              style="width: 100%;">
            </mat-paginator>
          
          </div>

        
      </div>
      
      </div>
    </div>

  </div>

 
  <!-- </div> -->
</div>