<div>
    <div class="container-fluid">
      <div>
        <!------------DATE-------------->
        <!-- <div class="row">
          <div class="col-md-12">
            <button
              mat-button
              class="btn btn-success"
              style="float: right; padding: 8px"
            >
              <i class="material-icons" style="font-size: 23px" (click)="prev()"
                >navigate_before</i
              >
              <input
                [hidden]="true"
                matInput
                [matDatepicker]="picker"
                (dateInput)="addEvent('input', $event)"
                [min]="minDate"
                [max]="maxDate"
                (dateChange)="addEvent('change', $event)"
              />
              <mat-datepicker touchUi #picker></mat-datepicker>
  
              <span (click)="picker.open()">
                {{ today | date }}
              </span>
  
              <i
                class="material-icons"
                *ngIf="this.isButtonVisible"
                (click)="next()"
                style="font-size: 23px"
                >navigate_next</i
              >
            </button>
          </div>
        </div> -->
  
        <!-------------------------------->
        <div class="row" *ngIf="!isUpdate">
          <div class="col-lg-12">
            <div class="card">
              <!-- <div class="card-body">  -->
              <div>
                <div class="card-header card-header-danger" style="padding: 10px">
                  <h4 class="card-title">Add Users</h4>
                </div>
  
                <div class="row" style="margin: 0px">
                  <div class="col-md-12">
                    <form [formGroup]="usersAddForm">
                      <!--Row one start-->
                      <div class="row form-group">
                        <div class="col-md-4 form-group">
                          <mat-form-field appearance="standard">
                            <mat-label> First Name </mat-label>
                            <input
                              type="text"
                              matInput
                              name="first_name"
                              formControlName="first_name"
                              placeholder="First Name"
                            />
                            <mat-error
                              *ngIf="hasError('first_name', 'required')"
                              >First Name is required</mat-error
                            >
                          </mat-form-field>
                        </div>
                        <div class="col-md-4 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label>Last Name</mat-label>
                              <input
                              type="text"
                              matInput
                              name="last_name"
                              formControlName="last_name"
                              placeholder="Last Name"
                            />
                            <mat-error
                              *ngIf="hasError('last_name', 'required')"
                              >Last Name is required</mat-error
                            >
                             
                            </mat-form-field>
                           
                        </div>
                        <div class="col-md-4 form-group">
                          <mat-form-field appearance="standard">
                            <mat-label>Contact No.</mat-label>
                            <input
                              type="text"
                              matInput
                              name="contact_no"
                              formControlName="contact_no"
                              placeholder="Contact_no"
                            />
                            <mat-error *ngIf="hasError('contact_no', 'required')"
                              >Contact No is required</mat-error
                            >
                          </mat-form-field>
                        </div>
                      </div>
                      <!--One end-->
  
                      <!---third row-->
  
                      <div class="row form-group">
                        <div class="col-md-3 form-group">
                          <mat-form-field appearance="standard">
                            <mat-label> Username</mat-label>
                            <input
                              type="text"
                              matInput
                              name="username"
                              formControlName="username"
                              placeholder="Username"
                            />
                            <mat-error
                              *ngIf="hasError('username', 'required')"
                            >
                            Username is required</mat-error
                            >
                          </mat-form-field>
                        </div>
                    
  
                        <div class="col-md-3 form-group">
                          <mat-form-field appearance="standard">
                            <mat-label>Password</mat-label>
                            <input
                              type="text"
                              matInput
                              name="password"
                              formControlName="password"
                              placeholder="Password"
                            />
                            <mat-error
                              *ngIf="hasError('password', 'required')"
                            >
                            Password is required</mat-error
                            >
                          </mat-form-field>
                        </div>
                     
  
                        <div class="col-md-3 form-group">
                          <mat-form-field appearance="standard">
                            <mat-label>ZipCode</mat-label>
                            <input
                              type="text"
                              matInput
                              name="zip_code"
                              formControlName="zip_code"
                              placeholder="Zip_code"
                            />
                            <mat-error
                              *ngIf="hasError('zip_code', 'required')"
                            >
                            Zip_code is required</mat-error
                            >
                          </mat-form-field>
                        </div>
                       
                        <div class="col-md-3 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label>Email</mat-label>
                              <input
                                type="text"
                                matInput
                                name="email"
                                formControlName="email"
                                placeholder="Email"
                              />
                              <mat-error
                                *ngIf="hasError('email', 'required')"
                              >
                              Email is required</mat-error
                              >
                            </mat-form-field>
                          </div>

                      </div>

                      <div class="row form-group">
                      
                        <div class="col-md-4 form-group">
                          <mat-form-field appearance="standard">
                            <mat-label>Role</mat-label>
                            <mat-select formControlName="level">
                        <mat-option
                          *ngFor="let ulist of allUserRolesResp"
                          [value]="ulist.id"
                        >
                          {{ ulist.name }}
                        </mat-option>
                      </mat-select>  
                          </mat-form-field>
                         
                      </div>
                     
                        <div class="col-md-4 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label> Site </mat-label>
                              <mat-select formControlName="sites" multiple>
                                <mat-option
                                  *ngFor="let ulist of allSitesResp"
                                  [value]="ulist.site_id"
                                >
                                  {{ ulist.site_name }}
                                </mat-option>
                              </mat-select> 
                            </mat-form-field>
                          </div>

                       
                      </div>
                      <!-- [disabled]="!usersAddForm.valid" -->
                      <!--Button start-->
                      <div class="row" style="align-content: center">
                        <div class="col-md-3"></div>
                        <div class="col-md-3" style="display: grid">
                          <button
                            type="submit"
                            class="btn btn-primary"
                           
  
                            (click)="addUsers()"
                          >
                            Add
                          </button>
                        </div>
                        <div class="col-md-3" style="display: grid">
                          <button
                            class="btn btn-primary"
                            mat-button
                            (click)="back()"
                          >
                            Back
                          </button>
                        </div>
                        <div class="col-md-3"></div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
  
        <div class="row" *ngIf="isUpdate">
            <div class="col-lg-12">
              <div class="card">
                <!-- <div class="card-body">  -->
                <div>
                  <div class="card-header card-header-danger" style="padding: 10px">
                    <h4 class="card-title">Edit Users</h4>
                  </div>
    
                  <div class="row" style="margin: 0px">
                    <div class="col-md-12">
                      <form [formGroup]="usersEditForm">
                        <!--Row one start-->
                        <div class="row form-group">
                          <div class="col-md-4 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label> First Name </mat-label>
                              <input
                                type="text"
                                matInput
                                name="first_name"
                                formControlName="first_name"
                                placeholder="First Name"
                              />
                              <mat-error
                                *ngIf="hasError1('first_name', 'required')"
                                >First Name is required</mat-error
                              >
                            </mat-form-field>
                          </div>
                          <div class="col-md-4 form-group">
                              <mat-form-field appearance="standard">
                                <mat-label>Last Name</mat-label>
                                <input
                                type="text"
                                matInput
                                name="last_name"
                                formControlName="last_name"
                                placeholder="Last Name"
                              />
                              <mat-error
                                *ngIf="hasError1('last_name', 'required')"
                                >Last Name is required</mat-error
                              >
                               
                              </mat-form-field>
                             
                          </div>
                          <div class="col-md-4 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label>Contact No.</mat-label>
                              <input
                                type="text"
                                matInput
                                name="contact_no"
                                formControlName="contact_no"
                                placeholder="Contact_no"
                              />
                              <mat-error *ngIf="hasError1('contact_no', 'required')"
                                >Contact No is required</mat-error
                              >
                            </mat-form-field>
                          </div>
                        </div>
                        <!--One end-->
    
                        <!---third row-->
    
                        <div class="row form-group">
                          <div class="col-md-3 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label> Username</mat-label>
                              <input
                                type="text"
                                matInput
                                name="username"
                                formControlName="username"
                                placeholder="Username"
                              />
                              <mat-error
                                *ngIf="hasError1('username', 'required')"
                              >
                              Username is required</mat-error
                              >
                            </mat-form-field>
                          </div>
                      
    
                          <div class="col-md-3 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label>Password</mat-label>
                              <input
                                type="text"
                                matInput
                                name="password"
                                formControlName="password"
                                placeholder="Password"
                              />
                              <mat-error
                                *ngIf="hasError1('password', 'required')"
                              >
                              Password is required</mat-error
                              >
                            </mat-form-field>
                          </div>
                       
    
                          <div class="col-md-3 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label>ZipCode</mat-label>
                              <input
                                type="text"
                                matInput
                                name="zip_code"
                                formControlName="zip_code"
                                placeholder="Zip_code"
                              />
                              <mat-error
                                *ngIf="hasError1('zip_code', 'required')"
                              >
                              Zip_code is required</mat-error
                              >
                            </mat-form-field>
                          </div>
                         
                          <div class="col-md-3 form-group">
                              <mat-form-field appearance="standard">
                                <mat-label>Email</mat-label>
                                <input
                                  type="text"
                                  matInput
                                  name="email"
                                  formControlName="email"
                                  placeholder="Email"
                                />
                                <mat-error
                                  *ngIf="hasError1('email', 'required')"
                                >
                                Email is required</mat-error
                                >
                              </mat-form-field>
                            </div>
  
                        </div>
  
                        <div class="row form-group">
                        
                          <div class="col-md-4 form-group">
                              <mat-form-field appearance="standard">
                                <mat-label>Role</mat-label>
                                <mat-select formControlName="level" name="role" 
                                 [(ngModel)]="role"> 
                            <mat-option
                              *ngFor="let ulist of allUserRolesResp"
                              [value]="ulist.name"
                            >
                              {{ ulist.name }}
                            </mat-option>
                          </mat-select>  
                              </mat-form-field>
                             
                          </div>
                       
                          <div class="col-md-4 form-group">
                            <mat-form-field appearance="standard">
                              <mat-label> Site </mat-label>
                              <mat-select formControlName="sites" multiple name="site" [ngModel]="site" >
                                <mat-option
                                  *ngFor="let ulist of allSitesResp"
                                  [value]="ulist.site_name"
                                >
                                  {{ ulist.site_name }}
                                </mat-option>
                              </mat-select> 
                            </mat-form-field>
                            </div>
                        </div>
    
                        <!--Button start-->
                        <div class="row" style="align-content: center">
                          <div class="col-md-3"></div>
                          <div class="col-md-3" style="display: grid">
                            <button
                              type="submit"
                              class="btn btn-primary"
                              [disabled]="!usersEditForm.valid"
    
                              (click)="updateUsers()"
                            >
                              Update
                            </button>
                          </div>
                          <div class="col-md-3" style="display: grid">
                            <button
                              class="btn btn-primary"
                              mat-button
                              (click)="back()"
                            >
                              Back
                            </button>
                          </div>
                          <div class="col-md-3"></div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> 
       
      </div>
    </div>
  </div>
  