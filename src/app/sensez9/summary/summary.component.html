<div>
    <div class="container-fluid">
      <div>
        <!------------DATE-------------->
        <!-- <div class="row">
            <div class="col-md-12">
              <button mat-button class="btn btn-success" style="float: right;padding: 8px;">
                <i class="material-icons" style="font-size: 23px" (click)="prev()">navigate_before</i>
                <input [hidden]="true" matInput [matDatepicker]="picker" (dateInput)="addEvent('input', $event)"
                  [min]="minDate" [max]="maxDate" (dateChange)="addEvent('change', $event)" />
                <mat-datepicker touchUi #picker></mat-datepicker>
    
                <span (click)="picker.open()">
                  {{ today | date }}
                </span>
    
                <i class="material-icons" *ngIf="this.isButtonVisible" (click)="next()"
                  style="font-size: 23px">navigate_next</i>
              </button>
            </div>
    
          </div> -->
       
          <div class="row">
            <div class="col-md-3" style="top: 12px;">
              <mat-form-field class="search">
                <mat-icon matPrefix>search</mat-icon>
                <input
                  #in
                  (input)="summaryData.queryBy({ search: in.value })"
                  type="text"
                  matInput
                  placeholder="Search"
                />
              </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field appearance="standard">
                    <mat-label> Zipcode </mat-label>
                    <mat-select   name="zip_code" [ngModel]="zip_code">
                      <mat-option
                        *ngFor="let ulist of allSitesResp"
                        [value]="ulist.site_name"
                      >
                        {{ ulist.site_name }}
                      </mat-option>
                    </mat-select> 
                  </mat-form-field>
            </div>
         
            <div class="col-md-2">
                <mat-form-field appearance="standard">
                    <mat-label> Site </mat-label>
                    <mat-select  multiple name="site" [ngModel]="site">
                      <mat-option
                        *ngFor="let ulist of allSitesResp"
                        [value]="ulist.site_name"
                      >
                        {{ ulist.site_name }}
                      </mat-option>
                    </mat-select> 
                  </mat-form-field>
            </div>
            <div class="col-md-2">
                <mat-form-field appearance="standard">
                    <mat-label> Tax Type </mat-label>
                    <mat-select   name="taxType" [ngModel]="taxType">
                      <mat-option
                        *ngFor="let ulist of allTaxTypesResp"
                        [value]="ulist.site_name"
                      >
                        {{ ulist.site_name }}
                      </mat-option>
                    </mat-select> 
                  </mat-form-field>
            </div>
          </div>

          <!-------------------------------->
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <!-- <div class="card-body">  -->
              <div>
                <div class="card-header card-header-danger" style="padding: 10px">
                  <h4 class="card-title" *ngIf="!isAdmin">
                    Site : {{site}} 
                    <button
                      mat-button
                      class="btn btn-success"
                      matTooltip="Download Report"
                      [matTooltipPosition]="'below'"
                      (click)="results()"
                      style="float: right; padding: 3px 10px 2px 10px"
                    >
                      <i class="material-icons">cloud_download</i>
                    </button>
                  </h4> 
  
              
                </div>
                <!--------------table-------------------->
                <div class="card-body">
                  <!-- <div class="row">
                    <div class="col-md-3">
                      <mat-form-field class="search">
                        <mat-icon matPrefix>search</mat-icon>
                        <input
                          #in
                          (input)="taxData.queryBy({ search: in.value })"
                          type="text"
                          matInput
                          placeholder="Search"
                        />
                      </mat-form-field>
                    </div>
                    <div class="col-md-2">
                      <mat-form-field class="property">
                        <mat-label>Order by</mat-label>
                        <mat-select
                          value="user_id"
                          (selectionChange)="
                            taxData.sortBy({ property: $event.value })
                          "
                        >
                          <mat-option value="created_date">Added On</mat-option>
                          <mat-option value="preparer_name"
                            >Preparer Name</mat-option
                          >
                          <mat-option value="preparer_zipcode"
                            >Preparer Zipcode</mat-option
                          >
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div class="col-md-1">
                      <mat-button-toggle-group
                        value="asc"
                        (change)="taxData.sortBy({ order: $event.value })"
                      >
                        <mat-button-toggle
                          style="width: 47px; height: 40px"
                          matTooltip="Ascending"
                          matTooltipPosition="right"
                          value="asc"
                        >
                          <mat-icon style="width: 29px">arrow_upward</mat-icon>
                        </mat-button-toggle>
                        <mat-button-toggle
                          matTooltip="Descending"
                          matTooltipPosition="left"
                          style="width: 50px; height: 40px"
                        >
                          <mat-icon style="width: 29px">arrow_downward</mat-icon>
                        </mat-button-toggle>
                      </mat-button-toggle-group>
                    </div>
                    <div class="col-md-2"></div>
  
                    <div class="col-md-4" style="padding: 0px 20px">
                      <button
                        mat-button
                        class="btn btn-success"
                        style="float: right; padding: 10px;"
                        [routerLink]="['/addupdateTaxPreparer']"
                        matTooltip="Add Tax Preparer"
                        [matTooltipPosition]="'below'"
                      >
                        <i class="material-icons" style="font-size: 23px">add</i> Add Preparer
                      </button>
                    </div>
                  </div> -->
              
  
                  <div >
                    <mat-spinner
                      *ngIf="summaryData.loading$ | async"
                      diameter="32"
                      style="align-self: center"
                    ></mat-spinner>
                    <div
                      class="example-container mat-elevation-z8"
                      *ngIf="summaryData"
                    >
                      <table
                        mat-table
                        [dataSource]="summaryData"
                        class="table table-striped"
                      >
                        <ng-container matColumnDef="sr_no">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                            style="padding: 2px"
                          >
                            Sr No.
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element; let i = index"
                            class="tableBody"
                            style="padding: 2px"
                          >
                            {{ i + 1 }}
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="total_appointments">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                          >
                          Total Appointments
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="tableBody"
                          >
                            {{ element.total_appointments }}
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="tax_preparer_count">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                          >
                          Tax Preparer 
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="tableBody"
                          >
                            {{ element.tax_preparer_count }}
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="document_drop_off_count">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                            style="background-color:lightgreen;"
                          >
                          Document Drop off
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="tableBody"
                          >
                            {{ element.document_drop_off_count }}
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="basic_in_person_count">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                            style="background-color: lightseagreen;"
                          >
                          Basic in Person
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="tableBody"
                          >
                            {{ element.basic_in_person_count }}
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="advance_in_person_count">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                            style="background-color:mediumblue;"
                          >
                          Advance In Person
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="tableBody"
                          >
                            {{ element.advance_in_person_count }}
                           
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="return_visit_count">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="tableHeader"
                            style="background-color: slateblue;"
                          >
                          Return Visit
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="tableBody"
                          >
                            {{ element.return_visit_count }}
                          </td>
                        </ng-container>
  
                        <ng-container matColumnDef="total_hours">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              class="tableHeader"
                              style="background-color:grey;"
                            >
                            Total Hours
                            </th>
                            <td
                              mat-cell
                              *matCellDef="let element"
                              class="tableBody"
                            >
                              {{ element.total_hours }}
                            </td>
                          </ng-container>
    
                          <ng-container matColumnDef="total_hours_booked">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              class="tableHeader"
                              style="background-color: grey;"
                            >
                            Total Hours Booked
                            </th>
                            <td
                              mat-cell
                              *matCellDef="let element"
                              class="tableBody"
                            >
                              {{ element.total_hours_booked }}
                            </td>
                          </ng-container>
    
                          <ng-container matColumnDef="booking_percentage">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              class="tableHeader"
                              style="background-color:grey;"
                            >
                            Booking Percentage
                            </th>
                            <td
                              mat-cell
                              *matCellDef="let element"
                              class="tableBody"
                            >
                              {{ element.booking_percentage }}
                             
                            </td>
                          </ng-container>
    
                          <ng-container matColumnDef="total_hours_available">
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              class="tableHeader"
                            >
                            Total Hours Available
                            </th>
                            <td
                              mat-cell
                              *matCellDef="let element"
                              class="tableBody"
                            >
                              {{ element.total_hours_available }}
                            </td>
                          </ng-container>
  
                     
                        <tr
                          mat-header-row
                          *matHeaderRowDef="this.displayedColumns"
                        ></tr>
                        <tr
                          mat-row
                          *matRowDef="let row; columns: displayedColumns"
                        ></tr>
                      </table>
  
                      <!-- <mat-paginator
                        *ngIf="summaryData.page$ | async as page"
                        [length]="page.totalElements"
                        [pageSize]="page.size"
                        [pageIndex]="page.number"
                        [hidePageSize]="false"
                        (page)="summaryData.fetch($event.pageIndex)"
                      >
                      </mat-paginator> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!--------------modal--------------------------->
    <div
      id="openModal"
      class="modal fade"
      tabindex="-1"
      role="dialog"
      aria-labelledby="openModalLabel"
      style="display: none"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="padding: 35px">
          <h4 style="margin: 0 auto; font-size: 18px; text-align: center">
            Do you want to Delete it ?
          </h4>
          <div style="padding: 9px"></div>
          <div class="form-group" style="margin: 0 auto">
            <div style="margin-top: 25px">
              <button
                mat-raised-button
                type="submit"
                class="btn btn-success pull-center cancel-btn"
                data-dismiss="modal"
                (click)="deleteTax()"
              >
                Yes
              </button>
              <button
                mat-raised-button
                type="submit"
                data-dismiss="modal"
                class="btn btn-danger pull-center cancel-btn"
              >
                No
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  